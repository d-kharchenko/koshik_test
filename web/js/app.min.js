function nullCartSrv(t){t>1?$(".makeOrderButton, .cost-block").css("opacity","1"):$(".makeOrderButton, .cost-block").css("opacity","0.3")}function addToCart(t){$.ajax({type:"POST",url:"addtocartajax/"+t,contentType:"application/json; charset=UTF-8",data:{product_id:t},dataType:"json",success:function(r,e,o){var a=o.responseText,n=$("#qty"+t),i=n.html();void 0==i&&(i=0);var c=JSON.parse(a);$("#itemCount").html(c.itemCountTotal),$("#itemCount").attr("itemData",c.itemCountTotal),$("#cartSumTotal").text(c.sumOrderTotal.toFixed(2)),nullCartSrv(c.sumOrderTotal),0==(1==c.products_cart.length&&0==c.products_cart[0].id)&&$("#cart-string0").remove();for(var d=0;d<c.products_cart.length;d++){var s=c.products_cart[d];if(s.id==t){if(n.html(s.qty),0==i){var l="<tr class='order-block__to-order' id = 'cart-string"+s.id+"'>";l=(l=(l=(l=(l=l+"<td id = 'row_num"+s.id+"'>"+s.row_num+"</td>")+"<td id = 'name"+s.id+"' style='text-align: left'>"+s.name+"</td>")+"<td id = 'qty"+s.id+"'>"+s.qty+"</td>")+"<td id = 'price"+s.id+"'>"+s.price+"</td>")+"<td><button class='delFromCartButton' id='delFromCartButton"+s.id+"' onclick='delFromCart("+s.id+")'><img class='delImgButton' src='img/delete-button.png'/></button></td>",l+="</tr>",$("#cart-table tr:last").after($(l))}}else $("#row_num"+s.id).html(s.row_num)}},error:function(t,r,e){alert(r+": "+e)}})}function delFromCart(t){0!=t&&$.ajax({type:"POST",url:"delfromcartajax/"+t,contentType:"application/json; charset=UTF-8",dataType:"json",success:function(r,e,o){var a=o.responseText,n=$("#qty"+t),i=n.html();void 0==i&&(i=0),i=Number(i)-1;var c=JSON.parse(a);nullCartSrv(c.sumOrderTotal),$("#itemCount").html(c.itemCountTotal),$("#itemCount").attr("itemData",c.itemCountTotal),$("#cartSumTotal").text(c.sumOrderTotal.toFixed(2));for(d=0;d<c.products_cart.length;d++)(s=c.products_cart[d]).id==t?n.html(s.qty):$("#row_num"+s.id).html(s.row_num);for(var d=0;d<c.products_cart.length;d++){var s=c.products_cart[d];s.id==t&&(i=s.qty)}if(i<=0&&0==(c.products_cart.length+1==1&&c.sumOrderTotal>0)&&$("#cart-string"+t).remove(),1==c.products_cart.length&&0==c.products_cart[0].id&&0==c.sumOrderTotal){var l="<tr class='order-block__to-order' id = 'cart-string0'>";l+="<td id = 'row_num0'></td>",l+="<td id = 'name0' style='text-align: left'>Кошик порожній</td>",l+="<td id = 'qty0'></td>",l+="<td id = 'price0'></td>",l+="<td><button class='delFromCartButton' id='delFromCartButton0' onclick='delFromCart(0)'><img class='delImgButton' src='img/delete-button.png' width='14' height='14'/></button></td>",l+="</tr>",$("#cart-table tr:last").after($(l))}},error:function(t,r,e){}})}function goToDeliveryInformation(){$.get({type:"POST",url:"checkcartajax",contentType:"application/json; charset=UTF-8",dataType:"json",success:function(t,r,e){var o=e.responseText;JSON.parse(o).cartIsEmpty||(window.location.href="/delivery")},error:function(t,r,e){alert(r+": "+e)}})}function goToFinishOrder(){$.get({type:"POST",url:"checkcartajax",contentType:"application/json; charset=UTF-8",dataType:"json",success:function(t,r,e){var o=e.responseText;JSON.parse(o).cartIsEmpty?window.location.href="":window.location.href="/orderfinish"},error:function(t,r,e){alert(r+": "+e)}})}$(function(){$(".hide-menu").click(function(){$(".order-list").toggle(),$(".sushi-menu").toggleClass("sushi-menu__adaptive"),$(".hide-menu__item").toggleClass("rotate-arrow")}),$(window).on("resize",function(){$(window).width()>767?$(".order-list").css({display:"block"}):$(".order-list").css({display:"none"})}),$(".header-block__menu-icon").click(function(){$(".header-nav").toggle(),$(".header-nav").css("padding-top","20px"),$(".header-nav").removeClass("hide-nav")}),$(".header-nav__item").click(function(){$(".header-nav").toggleClass("hide-nav"),$(".hide-nav").css({display:"none"})}),$("#cartSumTotal").html()>1?$(".makeOrderButton, .cost-block").css("opacity","1"):$(".makeOrderButton, .cost-block").css("opacity","0.3")}),$(document).ready(function(){var t=$("#itemCount").attr("itemData");$("#itemCount").html(t).css("display","block")});